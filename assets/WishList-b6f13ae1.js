import{r,S as k,_ as A,d as C,u as B,m as V,n as m,c as S,j as c,a as e,L as z,o as T,i as _}from"./index-414ac27f.js";import{a as M,b as W}from"./wishListApi-3f765d3f.js";var p=r.forwardRef(function(t,s){var i={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return r.createElement(k,A({iconAttrs:i,iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},t,{ref:s}),r.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),r.createElement("path",{d:"M7 4V2h10v2h5v2h-2v15a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V6H2V4h5zM6 6v14h12V6H6zm3 3h2v8H9V9zm4 0h2v8h-2V9z"}))});p.displayName="DeleteBin6";function j({product:t}){var g,w,v,E,y;const{user:s}=C(n=>n==null?void 0:n.user),i=B(),[d,{isSuccess:l,isError:x,error:f,isLoading:h}]=V(),[a,{isError:H,isLoading:b,isSuccess:u,error:P}]=M(),L=()=>{var o;const n=s==null?void 0:s.email,N={productId:(o=t==null?void 0:t.product)==null?void 0:o._id};a({userEmail:n,data:N})},D=()=>{var o;const n=s==null?void 0:s.email,N={product:(o=t==null?void 0:t.product)==null?void 0:o._id};d({email:n,data:N})};return r.useEffect(()=>{l&&(m.dismiss(),i(S(!0)),m.success("Product added to cart",{id:"toastId"}))},[l]),r.useEffect(()=>{u&&(m.dismiss(),i(S(!1)),m.success("Product removed from wishlist",{id:"toastId2"}))},[u]),c("tr",{children:[e("td",{children:e("div",{className:"flex items-center space-x-3",children:e("div",{className:"avatar",children:e("div",{className:"mask w-12 h-12",children:e("img",{className:"w-full",src:(w=(g=t==null?void 0:t.product)==null?void 0:g.images)==null?void 0:w[0],alt:"Avatar Tailwind CSS Component"})})})})}),c("td",{className:"font-bold text-center",children:["$",(v=t==null?void 0:t.product)==null?void 0:v.price]}),e("td",{children:((E=t==null?void 0:t.product)==null?void 0:E.status)==="IN-STOCK"?e("p",{className:"text-sm text-center text-sky-700",children:"In Stock"}):e("p",{className:"text-sm text-center text-red-700",children:"Out of Stock"})}),e("th",{className:"text-center",children:c("div",{className:"flex flex-wrap items-center justify-end  gap-5",children:[c("div",{className:"flex justify-start",children:[e(z,{to:`/product-details/${(y=t==null?void 0:t.product)==null?void 0:y._id}`,children:e("button",{className:" px-3 py-2 text-xs  mr-3 bg-white text-black border-2 border-black-400 rounded",children:"QUICK VIEW"})}),e("button",{onClick:D,className:" px-3 py-2 text-xs   text-white bg-[#333333] rounded ",disabled:h,children:"Add TO CART"})]}),b?e("button",{type:"button",className:"indicator-item border-opacity-5 rounded-lg  cursor-pointer w-[36px] h-[24px]",disabled:!0,children:e(T,{className:"animate-spin",color:"#336699",size:15})}):e("button",{onClick:L,className:"btn btn-ghost btn-active btn-xs outline-0 border-none !bg-transparent",disabled:b,children:e(p,{size:20})})]})})]},t._id)}const Q=()=>{var x,f,h;const{user:t}=C(a=>a==null?void 0:a.user),{data:s,isLoading:i,isError:d}=W(t==null?void 0:t.email);console.log(s==null?void 0:s.products,"dddd");let l=null;return i&&(l=e("div",{className:"mb-5 text-center",children:e(_,{})})),!i&&d&&(l=e("tr",{className:"text-danger",children:e("td",{children:"Something was wrong!"})})),!i&&!d&&((x=s==null?void 0:s.products)==null?void 0:x.length)===0&&(l=e("tr",{className:"text-danger",children:e("td",{children:"No wishlist item found"})})),!i&&!d&&((f=s==null?void 0:s.products)==null?void 0:f.length)>0&&(l=(h=s==null?void 0:s.products)==null?void 0:h.map(a=>e(j,{product:a},a==null?void 0:a._id))),e("div",{className:" ",children:e("div",{className:"overflow-x-auto w-full",children:i?e("div",{className:"text-center mt-5 w-full",children:l}):c("table",{className:"table w-full",children:[e("thead",{children:c("tr",{children:[e("th",{children:"Product"}),e("th",{className:"text-center",children:"Price"}),e("th",{className:"text-center",children:"Stock Status"}),e("th",{className:"text-right",children:"Action"})]})}),e("tbody",{children:l})]})})})};export{Q as default};
