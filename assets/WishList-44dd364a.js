import{r as l,S as z,_ as A,d as S,u as M,n as k,o as h,c as y,j as c,a as e,L as B,p as T,i as _}from"./index-a2cf8386.js";import{a as j,b as H}from"./wishListApi-09f5984a.js";var C=l.forwardRef(function(t,s){var a={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return l.createElement(z,A({iconAttrs:a,iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},t,{ref:s}),l.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),l.createElement("path",{d:"M7 4V2h10v2h5v2h-2v15a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V6H2V4h5zM6 6v14h12V6H6zm3 3h2v8H9V9zm4 0h2v8h-2V9z"}))});C.displayName="DeleteBin6";var L=l.forwardRef(function(t,s){var a={fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"};return l.createElement(z,A({iconAttrs:a,iconVerticalAlign:"middle",iconViewBox:"0 0 24 24"},t,{ref:s}),l.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),l.createElement("path",{d:"M12 2a1 1 0 0 1 1 1v3a1 1 0 0 1-2 0V3a1 1 0 0 1 1-1zm0 15a1 1 0 0 1 1 1v3a1 1 0 0 1-2 0v-3a1 1 0 0 1 1-1zm8.66-10a1 1 0 0 1-.366 1.366l-2.598 1.5a1 1 0 1 1-1-1.732l2.598-1.5A1 1 0 0 1 20.66 7zM7.67 14.5a1 1 0 0 1-.366 1.366l-2.598 1.5a1 1 0 1 1-1-1.732l2.598-1.5a1 1 0 0 1 1.366.366zM20.66 17a1 1 0 0 1-1.366.366l-2.598-1.5a1 1 0 0 1 1-1.732l2.598 1.5A1 1 0 0 1 20.66 17zM7.67 9.5a1 1 0 0 1-1.366.366l-2.598-1.5a1 1 0 1 1 1-1.732l2.598 1.5A1 1 0 0 1 7.67 9.5z"}))});L.displayName="Loader";function W({product:t}){var v,b,g,p,E;const{user:s}=S(r=>r==null?void 0:r.user),a=M(),[d,{isSuccess:n,isError:f,error:x,isLoading:o}]=k(),[i,{isError:P,isLoading:w,isSuccess:u,error:O}]=j(),V=()=>{var m;const r=s==null?void 0:s.email,N={productId:(m=t==null?void 0:t.product)==null?void 0:m._id};i({userEmail:r,data:N})},D=()=>{var m;const r=s==null?void 0:s.email,N={product:(m=t==null?void 0:t.product)==null?void 0:m._id};d({email:r,data:N})};return l.useEffect(()=>{n&&(h.dismiss(),a(y(!0)),h.success("Product added to cart",{id:"toastId"}))},[n]),l.useEffect(()=>{u&&(h.dismiss(),a(y(!1)),h.success("Product removed from wishlist",{id:"toastId2"}))},[u]),c("tr",{children:[e("td",{children:e("div",{className:"flex items-center space-x-3",children:e("div",{className:"avatar",children:e("div",{className:"mask w-12 h-12",children:e("img",{className:"w-full",src:(b=(v=t==null?void 0:t.product)==null?void 0:v.images)==null?void 0:b[0],alt:"Avatar Tailwind CSS Component"})})})})}),c("td",{className:"font-bold text-center",children:["$",(g=t==null?void 0:t.product)==null?void 0:g.price]}),e("td",{children:((p=t==null?void 0:t.product)==null?void 0:p.status)==="IN-STOCK"?e("p",{className:"text-sm text-center text-sky-700",children:"In Stock"}):e("p",{className:"text-sm text-center text-red-700",children:"Out of Stock"})}),e("th",{className:"text-center",children:c("div",{className:"flex flex-wrap items-center justify-end  gap-5",children:[c("div",{className:"flex justify-start",children:[e(B,{to:`/product-details/${(E=t==null?void 0:t.product)==null?void 0:E._id}`,children:e("button",{className:" px-3 py-2 text-xs  mr-3 bg-white text-black border-2 border-black-400 rounded",children:"QUICK VIEW"})}),c("button",{onClick:D,className:"py-2 pl-5 w-[120px] text-xs flex items-center justify-between text-white bg-[#333333] rounded ",disabled:o,children:[e("p",{className:"inline basis-40",children:"Add TO CART "}),e("span",{className:"inline basis-40",children:o&&e(L,{className:"animate-spin align-middle",size:20})})]})]}),w?e("button",{type:"button",className:"indicator-item border-opacity-5 rounded-lg  cursor-pointer w-[36px] h-[24px]",disabled:!0,children:e(T,{className:"animate-spin",color:"#336699",size:15})}):e("button",{onClick:V,className:"btn btn-ghost btn-active btn-xs outline-0 border-none !bg-transparent",disabled:w,children:e(C,{size:20})})]})})]},t._id)}const Q=()=>{var f,x,o;const{user:t}=S(i=>i==null?void 0:i.user),{data:s,isLoading:a,isError:d}=H(t==null?void 0:t.email);console.log(s==null?void 0:s.products,"dddd");let n=null;return a&&(n=e("div",{className:"mb-5 text-center",children:e(_,{})})),!a&&d&&(n=e("tr",{className:"text-danger",children:e("td",{children:"Something was wrong!"})})),!a&&!d&&((f=s==null?void 0:s.products)==null?void 0:f.length)===0&&(n=e("tr",{className:"text-danger",children:e("td",{children:"No wishlist item found"})})),!a&&!d&&((x=s==null?void 0:s.products)==null?void 0:x.length)>0&&(n=(o=s==null?void 0:s.products)==null?void 0:o.map(i=>e(W,{product:i},i==null?void 0:i._id))),e("div",{className:" ",children:e("div",{className:"overflow-x-auto w-full",children:a?e("div",{className:"text-center mt-5 w-full",children:n}):c("table",{className:"table w-full",children:[e("thead",{children:c("tr",{children:[e("th",{children:"Product"}),e("th",{className:"text-center",children:"Price"}),e("th",{className:"text-center",children:"Stock Status"}),e("th",{className:"text-right",children:"Action"})]})}),e("tbody",{children:n})]})})})};export{Q as default};
