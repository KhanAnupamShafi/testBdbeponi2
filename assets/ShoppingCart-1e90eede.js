import{r as E,n as O,D as Q,E as U,j as t,a as e,p as C,G as _,L as B,M as R,P as $,d as G,g as F,i as H}from"./index-a2cf8386.js";function Y({product:a,user:s}){var D,L,z,A,T,P;const[S,N]=E.useState(1),[n,{isSuccess:m,isError:h,error:r,isLoading:b}]=O(),[x,{isError:p,isLoading:d,isSuccess:u,error:y}]=Q(),[g,{isSuccess:f,isError:w,error:k,isLoading:i}]=U(),I=l=>{const c=s==null?void 0:s.email;x({productId:{productId:l},userEmail:c})},q=(l,c)=>{const o=s==null?void 0:s.email;n({email:o,data:{product:l}})},M=(l,c)=>{const o=s==null?void 0:s.email;g({email:o,data:{minusQty:c,product:l}})},j=l=>{let c=l.target.valueAsNumber,{min:o,max:v}=l.target;c=Math.max(Number(o),Math.min(Number(v),Number(c))),N(c)};return t("tr",{className:"block lg:table-row text-[#333]",children:[e("td",{className:"block mx-auto lg:table-cell w-auto lg:w-[100px]",children:e("div",{className:"max-w-[300px] lg:max-w-[100px] w-full mx-auto relative text-center",children:t("div",{className:"indicator",children:[d?e("button",{type:"button",className:"indicator-item border-opacity-5 rounded-lg shadow-lg cursor-pointer h-5 w-5",disabled:!0,children:e(C,{className:"animate-spin",size:15})}):e("button",{disabled:d,onClick:()=>{var l;return I((l=a==null?void 0:a.product)==null?void 0:l._id)},className:"indicator-item border-opacity-5 rounded-lg bg-white shadow-lg cursor-pointer",children:e(_,{size:20})}),e("figure",{className:"product-media",children:e(B,{to:`/product-details/${(D=a==null?void 0:a.product)==null?void 0:D._id}`,children:e("img",{className:"max-w-full lg:max-w-[100px] h-[100px] object-cover",src:(z=(L=a==null?void 0:a.product)==null?void 0:L.images)==null?void 0:z[0],alt:"product"})})})]})})}),e("td",{className:"text-center text-lg lg:text-sm font-normal lg:font-bold block lg:table-cell py-0 pb-2.5",children:(A=a==null?void 0:a.product)==null?void 0:A.name}),t("td",{className:"text-center lg:text-base font-semibold block lg:table-cell py-0 pb-2.5",children:["$",(T=a==null?void 0:a.product)==null?void 0:T.price,".00"]}),e("td",{className:"block lg:table-cell mx-auto text-center py-0 pb-2.5",children:t("div",{className:"text-center inline-flex w-full max-w-[120px] relative h-[44px]",children:[e("input",{className:"flex-1 relative px-4 border input rounded-sm border-[#ccc] focus:outline-none",type:"number",min:1,max:5,value:a==null?void 0:a.quantity,onChange:j}),t("div",{className:"absolute space-x-2 top-1/2 -translate-y-2/4 right-2",children:[i?e("button",{type:"button",className:" items-center text-gray-600 hover:text-gray-700  outline-none border-transparent",disabled:!0,children:e(C,{className:"animate-spin",color:"#336699",size:20})}):e("button",{className:"quantity-minus ",onClick:()=>{var l;return M((l=a==null?void 0:a.product)==null?void 0:l._id,(a==null?void 0:a.quantity)-1)},disabled:(a==null?void 0:a.quantity)===1,children:e(R,{className:"bg-[#eee] hover:text-[#ff4747] transition-colors rounded-full",color:"#666",size:20})}),b?e("button",{type:"button",className:" items-center text-gray-600 hover:text-gray-700  outline-none border-transparent",disabled:!0,children:e(C,{className:"animate-spin",color:"#336699",size:20})}):e("button",{className:"quantity-plus",onClick:()=>{var l;return q((l=a==null?void 0:a.product)==null?void 0:l._id,(a==null?void 0:a.quantity)+1)},children:e($,{className:"bg-[#eee] hover:text-[#ff4747] transition-colors rounded-full",color:"#666",size:20})})]})]})}),e("td",{className:"block lg:table-cell mx-auto text-center py-0 pb-2.5",children:t("p",{className:"text-lg font-semibold text-center text-sky-700",children:["$",((P=a==null?void 0:a.product)==null?void 0:P.price)*(a==null?void 0:a.quantity),".00"]})})]},a==null?void 0:a._id)}const K=()=>{var b,x,p,d,u,y,g,f,w,k;const{user:a}=G(i=>i==null?void 0:i.user),[s,S]=E.useState(!0),N={email:a==null?void 0:a.email},{data:n,isLoading:m,isError:h}=F(N,{skip:s});E.useEffect(()=>{a&&S(!1)},[a]);let r=null;return m&&(r=e(H,{})),!m&&h&&(r=e("p",{className:"text-danger",children:"Something was wrong!"})),!m&&!h&&((p=(x=(b=n==null?void 0:n.data)==null?void 0:b.cartData)==null?void 0:x.products)==null?void 0:p.length)===0&&(r=e("p",{className:"text-danger",children:"Your cart is empty"})),!m&&!h&&((y=(u=(d=n==null?void 0:n.data)==null?void 0:d.cartData)==null?void 0:u.products)==null?void 0:y.length)>0&&(r=(w=(f=(g=n==null?void 0:n.data)==null?void 0:g.cartData)==null?void 0:f.products)==null?void 0:w.map(i=>e(Y,{product:i,user:a},i==null?void 0:i._id))),t("div",{children:[e("section",{className:"w-full lg:h-40  text-center py-5 lg:pt-14 text-xl lg:text-4xl font-bold",children:e("p",{children:"Shopping Cart"})}),t("div",{className:"container grid grid-cols-9 pb-5",children:[t("div",{className:"col-span-9 xl:col-span-6 px-4 w-full ",children:[t("table",{className:"table w-full collapse z-0",children:[e("thead",{className:"hidden lg:table-header-group",children:t("tr",{className:"bg-none",children:[e("th",{className:"capitalize text-base bg-none",children:"Product"}),e("th",{className:"capitalize text-base bg-none",children:"Product Name"}),e("th",{className:"capitalize text-base bg-none",children:"Price"}),e("th",{className:"capitalize text-base bg-none",children:"Quantity"}),e("th",{className:"capitalize text-base bg-none",children:"Subtotal"})]})}),e("tbody",{className:"block lg:table-row-group border border-[#eee] lg:py-0 py-5 lg:border-none",children:r})]}),e("hr",{}),t("div",{className:"py-4 mb-7 flex flex-wrap gap-4 lg:gap-0 w-full justify-between items-center",children:[e("button",{className:"btn btn-block lg:btn-wide lg:btn-md rounded bg-black text-white lg:text-sm text-xs  lg:font-semibold",children:"CONTINUE SHOPPING"}),t("div",{className:"flex justify-betweencommit items-center gap-3",children:[e("button",{className:"btn btn-outline lg:btn-md rounded px-5 lg:text-sm text-xs lg:font-semibold",children:"CLEAR CART"}),e("button",{className:"btn lg:btn-md rounded px-5 text-white lg:text-sm text-xs lg:font-semibold l",children:"UPDATE CART"})]})]}),t("div",{className:"py-[1rem]",children:[e("h1",{className:"font-semibold text-xl py-2",children:"COUPON DISCOUNT"}),e("input",{className:"border-none w-full h-2 py-[1.3rem] focus:outline-none px-2",type:"text",name:"",id:"",placeholder:"Enter coupon code here..."}),e("hr",{})]})]}),t("div",{className:"col-span-9 lg:col-span-3 px-4 w-full pl-5",children:[e("h2",{className:"text-xl font-bold",children:"CART TOTALS"}),e("br",{}),t("div",{className:"flex justify-between pb-5",children:[e("h1",{children:"Subtotal"}),t("h1",{className:"pl-[14rem] font-bold",children:["à§³ ",(k=n==null?void 0:n.data)==null?void 0:k.subtotal]})]}),e("hr",{}),t("div",{className:"my-4",children:[e("h1",{className:"font-bold",children:"Shipping"}),t("div",{className:"flex gap-2 my-1",children:[e("input",{type:"checkbox",checked:!0,className:"checkbox checkbox-xs mt-[.3rem]"}),e("p",{children:"Free Shipping"})]}),t("div",{className:"flex gap-2 my-1",children:[e("input",{type:"checkbox",checked:!0,className:"checkbox checkbox-xs mt-[.3rem]"}),e("p",{children:"Local Pickup"})]}),t("div",{className:"flex gap-2 my-1",children:[e("input",{type:"checkbox",checked:!0,className:"checkbox checkbox-xs mt-[.3rem]"}),e("p",{children:"Flat rate: $5.00"})]}),t("h1",{children:["Shipping to ",e("span",{className:"font-bold",children:"CA"})]})]})]})]})]})};export{K as default};
